<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anidroid - Anime Online Gratis HD</title>
    <link rel="icon" href="logoBackground.png" type="image/png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap');

        :root {
            /* Dark Theme (Default) */
            --brand-color: #f47521;
            --brand-hover: #fb8c00;
            --bg-color: #0d0d0d;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --container-bg: rgba(10, 10, 10, 0.6);
            --modal-bg: #1a1a1a;
            --logo-bg: transparent;
            --overlay-gradient: linear-gradient(to top, rgba(0, 0, 0, 0.9) 15%, rgba(0, 0, 0, 0.25) 70%);
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg-color: #f0f2f5;
                --text-primary: #1c1e21;
                --text-secondary: #555555;
                --container-bg: rgba(255, 255, 255, 0.65);
                --modal-bg: #ffffff;
                --logo-bg: rgba(0, 0, 0, 0.15);
                --overlay-gradient: linear-gradient(to top, rgba(240, 242, 245, 0.8) 15%, rgba(240, 242, 245, 0.2) 70%);
            }
        }

        @keyframes kenburns-subtle { 0% { transform: scale(1.05) translate(0, 0); } 100% { transform: scale(1.08) translate(-1%, 1%); } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(244, 117, 33, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(244, 117, 33, 0); } 100% { box-shadow: 0 0 0 0 rgba(244, 117, 33, 0); } }

        body, html { height: 100%; margin: 0; font-family: 'Lato', sans-serif; color: var(--text-primary); background-color: var(--bg-color); overflow: hidden; }

        .hero-section { height: 100%; position: relative; display: flex; justify-content: center; align-items: center; padding: 10px; box-sizing: border-box; }
        .background-stack { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; border-radius: 15px; overflow: hidden; }
        .background-layer { position: absolute; width: 100%; height: 100%; background-size: cover; background-position: center; opacity: 0; transition: opacity 1s ease-in-out; animation: kenburns-subtle 45s ease-in-out infinite alternate; }
        .background-layer.visible { opacity: 1; z-index: 2; }
        .background-layer::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--overlay-gradient); }

        .hero-content { position: relative; z-index: 3; max-width: 550px; width: 90%; text-align: center; background: var(--container-bg); padding: 30px 25px; border-radius: 12px; backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .logo { width: 100px; height: 100px; margin-bottom: 15px; border-radius: 22px; border: 3px solid var(--brand-color); box-shadow: 0 0 20px rgba(244, 117, 33, 0.5); background-color: var(--logo-bg); padding: 5px; box-sizing: border-box; }
        h1 { font-size: 3em; font-weight: 900; margin: 0 0 10px; text-shadow: 2px 2px 8px rgba(0,0,0,0.5); }
        p.slogan { font-size: 1.2em; font-weight: 700; line-height: 1.5; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }
        .download-button { display: inline-block; background-color: var(--brand-color); color: var(--text-primary); padding: 15px 40px; text-decoration: none; font-size: 1.2em; font-weight: 700; border-radius: 8px; transition: transform 0.2s ease, background-color 0.3s ease; text-transform: uppercase; box-shadow: 0 4px 20px rgba(0,0,0,0.4); animation: pulse 2.5s infinite; }
        .download-button:hover { background-color: var(--brand-hover); transform: scale(1.05); }

        .interactive-bar { display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px; }
        .icon-button { background: none; border: none; padding: 10px; cursor: pointer; color: var(--text-primary); transition: transform 0.2s ease; }
        .icon-button:hover { transform: scale(1.15); }
        .icon-button svg { width: 28px; height: 28px; fill: currentColor; }

        .modal { display: none; position: fixed; z-index: 1000; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-content { background-color: var(--modal-bg); color: var(--text-primary); padding: 25px; border-radius: 8px; max-width: 90%; width: 500px; max-height: 85vh; overflow-y: auto; position: relative; text-align: left; }
        .modal-content h2 { margin-top: 0; color: var(--brand-color); }
        .modal-content a { color: var(--brand-color); }
        .modal-content .feature { margin-bottom: 20px; } .modal-content .feature:last-child { margin-bottom: 0; }
        .modal-content .feature h3 { margin: 0 0 5px; } .modal-content .feature p { margin: 0; color: var(--text-secondary); }
        .modal .close { position: absolute; top: 10px; right: 15px; font-size: 28px; font-weight: bold; cursor: pointer; color: var(--text-secondary); }

        #carousel-modal .modal-content { padding: 15px; max-width: 800px; }
        .carousel-container { position: relative; overflow: hidden; }
        .carousel-track { display: flex; transition: transform 0.5s ease-in-out; }
        .carousel-slide { min-width: 100%; box-sizing: border-box; padding: 0 10px; }
        .carousel-slide img { width: 100%; border-radius: 8px; cursor: pointer; }
        .carousel-nav { position: absolute; top: 50%; transform: translateY(-50%); background-color: rgba(0,0,0,0.5); color: white; border: none; cursor: pointer; padding: 10px; border-radius: 50%; z-index: 10; }
        .prev { left: 15px; } .next { right: 15px; }

        .lightbox { display: none; position: fixed; z-index: 2000; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
        .lightbox img { max-width: 90%; max-height: 80%; border-radius: 5px; }
        .lightbox .close { position: absolute; top: 30px; right: 40px; color: white; font-size: 40px; font-weight: bold; cursor: pointer; }

        @media (max-width: 600px) { h1 { font-size: 2.5em; } p.slogan { font-size: 1.1em; } .download-button { font-size: 1.1em; padding: 12px 30px; } .hero-content { padding: 25px 15px; } .icon-button svg { width: 24px; height: 24px; } }
    </style>
</head>
<body>
    <div class="hero-section">
        <div class="background-stack">
            <div id="bg1" class="background-layer"></div>
            <div id="bg2" class="background-layer"></div>
        </div>

        <div class="hero-content">
            <img src="logo.png" alt="Anidroid Logo" class="logo">
            <h1>Anidroid</h1>
            <p class="slogan">Anime Online Gratis HD</p>
            <a href="https://github.com/YuunoKaori/Anidroid/releases/latest/download/app-release.apk" class="download-button">Descargar Ahora</a>
            <div class="interactive-bar">
                <button class="icon-button" data-modal-id="features-modal" title="Caracter칤sticas">
                    <svg viewBox="0 0 24 24"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                </button>
                <button class="icon-button" data-modal-id="carousel-modal" title="Capturas">
                    <svg viewBox="0 0 24 24"><path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
                </button>
                <button class="icon-button" data-modal-id="privacy-modal" title="Pol칤tica de Privacidad">
                    <svg viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/></svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="features-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Caracter칤sticas Principales</h2>
            <div class="feature"><h3>游녻 Perfiles y Playlists</h3><p>Crea perfiles de usuario y organiza tus animes en playlists personalizadas que puedes importar y exportar.</p></div>
            <div class="feature"><h3>郊윒잺 Doble Reproductor</h3><p>Elige entre un reproductor nativo para m치xima velocidad o un WebView como alternativa (puede causar inestabilidad).</p></div>
            <div class="feature"><h3>游닀 Historial Alpha</h3><p>Lleva un registro de los episodios y animes que has visto. Esta funci칩n se encuentra en una etapa muy temprana de desarrollo.</p></div>
        </div>
    </div>

    <div id="carousel-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="carousel-container">
                <div class="carousel-track"></div>
                <button class="carousel-nav prev">&#10094;</button>
                <button class="carousel-nav next">&#10095;</button>
            </div>
        </div>
    </div>

    <div id="privacy-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Pol칤tica de Privacidad de Anidroid</h2>
            <p><strong>칔ltima actualizaci칩n:</strong> 23 de Junio de 2025</p>
            <p>Anidroid funciona como un cliente que accede a contenido de AnimeFLV. No alojamos contenido. Usamos AppMetrica para an치lisis de uso seudonimizados. La app incluye anuncios de terceros que pueden ser deshabilitados. Para m치s detalles, cont치ctenos.</p>
            <p>Email: ydnsm60@gmail.com</p>
        </div>
    </div>

    <div id="lightbox-modal" class="lightbox">
        <span class="close">&times;</span>
        <img id="lightbox-img">
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- Background Image Cycler --- //
            const bgLayers = [document.getElementById('bg1'), document.getElementById('bg2')];
            let currentLayer = 0; const imageQueue = []; let isFetching = false;
            const API_URL = 'https://api.waifu.pics/sfw/waifu';

            const fillImageQueue = async () => {
                if (isFetching || imageQueue.length >= 3) return;
                isFetching = true;
                try {
                    const promises = Array(3 - imageQueue.length).fill().map(() => fetch(API_URL).then(res => res.json()));
                    const results = await Promise.all(promises);
                    results.forEach(data => { if (data.url) imageQueue.push(data.url); });
                } catch (error) { console.error('Error fetching images:', error); }
                finally { isFetching = false; if (bgLayers[0].style.backgroundImage === '') cycleImage(); }
            };

            const cycleImage = () => {
                if (imageQueue.length === 0) { fillImageQueue(); return; }
                const nextImageUrl = imageQueue.shift();
                const img = new Image();
                img.src = nextImageUrl;
                img.onload = () => {
                    const nextLayerIndex = (currentLayer + 1) % 2;
                    bgLayers[nextLayerIndex].style.backgroundImage = `url(${nextImageUrl})`;
                    bgLayers[nextLayerIndex].classList.add('visible');
                    bgLayers[currentLayer].classList.remove('visible');
                    currentLayer = nextLayerIndex;
                    if (imageQueue.length < 2) fillImageQueue();
                };
                img.onerror = () => { console.error('Error loading image:', nextImageUrl); cycleImage(); };
            };
            fillImageQueue(); setInterval(cycleImage, 6000);

            // --- Modal Handling --- //
            const openModal = (modalId) => document.getElementById(modalId)?.style.display = 'flex';
            const closeModal = (modal) => modal.style.display = 'none';

            document.querySelectorAll('[data-modal-id]').forEach(button => {
                button.addEventListener('click', () => openModal(button.dataset.modalId));
            });

            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(modal); });
                modal.querySelector('.close')?.addEventListener('click', () => closeModal(modal));
            });

            // --- Carousel --- //
            const carouselTrack = document.querySelector('.carousel-track');
            const imageFiles = ['Captura1.jpg', 'Captura2.jpg', 'Captura3.jpg', 'Captura4.jpg', 'Captura5.jpg'];
            let slides = [];
            let currentIndex = 1;
            let isTransitioning = false;

            const setupCarousel = () => {
                const slideContent = [...imageFiles, ...imageFiles, ...imageFiles]; // Create a long track for infinite feel
                carouselTrack.innerHTML = slideContent.map(file => `<div class="carousel-slide"><img src="${file}" alt="${file}"></div>`).join('');
                slides = document.querySelectorAll('.carousel-slide');
                updateCarousel();
            };

            const updateCarousel = () => {
                carouselTrack.style.transition = 'transform 0.5s ease-in-out';
                carouselTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
            };

            const handleNav = (direction) => {
                if (isTransitioning) return;
                isTransitioning = true;
                currentIndex += direction;
                updateCarousel();
            };

            carouselTrack.addEventListener('transitionend', () => {
                isTransitioning = false;
                const numImages = imageFiles.length;
                if (currentIndex <= numImages - 1) {
                    currentIndex += numImages;
                    carouselTrack.style.transition = 'none';
                    carouselTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
                } else if (currentIndex >= numImages * 2) {
                    currentIndex -= numImages;
                    carouselTrack.style.transition = 'none';
                    carouselTrack.style.transform = `translateX(-${currentIndex * 100}%)`;
                }
            });

            document.querySelector('.carousel-nav.prev').addEventListener('click', () => handleNav(-1));
            document.querySelector('.carousel-nav.next').addEventListener('click', () => handleNav(1));
            setupCarousel();

            // --- Lightbox --- //
            const lightbox = document.getElementById('lightbox-modal');
            const lightboxImg = document.getElementById('lightbox-img');
            const closeLightbox = lightbox.querySelector('.close');

            carouselTrack.addEventListener('click', (e) => {
                if (e.target.tagName === 'IMG') {
                    lightbox.style.display = 'flex';
                    lightboxImg.src = e.target.src;
                }
            });
            closeLightbox.addEventListener('click', () => { lightbox.style.display = 'none'; });
            lightbox.addEventListener('click', (e) => { if (e.target === lightbox) lightbox.style.display = 'none'; });
        });
    </script>
</body>
</html>
